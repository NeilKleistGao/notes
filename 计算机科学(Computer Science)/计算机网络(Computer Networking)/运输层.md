# 可靠数据传输原理
## rdt1.0
考虑最简单的情况：底层信道完全可信，那么此时发送方只需从网络层接收数据并发送；接收方只需要接收数据并传递给网络层即可。

## rdt2.0（自动重传请求协议，停等协议）
底层信道中的模型可能受损，所以需要从接收方获取确认信息（包括肯定确认和否定确认）。接收方也需要有差错检测技术。发送方在没有收到确认信息前，不会有其他动作。

## rdt2.1
如果传输过程中ACK和NAK消息被混淆，则重传的数据很有可能被当作是新的数据！

为此，我们需要为数据包添加编号(此时仅有0和1)。这样就可以标明本次发送的数据是旧数据或者新数据。在发送方接收到冗余ACK后，就能知道接收方没有收到该分组后面的分组。

## rdt2.2
更进一步地，我们将ACK回传消息同样也带上序号，这样就可以确定我们所收到的确认消息所针对的是那一个数据包。

## rdt3.0（比特交换协议ABP）
为了实现基于时间的重传机制，需要一个倒数定时器：
+ 每次发送分组时，启动一个定时器
+ 响应定时器中断，采取适当的动作（重传）
+ 如果分组正常送达（收到ACK），终止定时器

## 回退N协议（滑动窗口协议）
+ 当上层调用该协议时，发送放检查窗口是否已满，如果未满则产生分组并发送；如果已满则通知上层协议。
+ 收到ACK时，对序号为n的分组确认采取累积确认的方式，表明收到n以前和n号分组
+ 超时事件，发送方重传所有已发送但是未确认的分组
+ 接收方会丢弃所有失序分组

## 选择重传
+ 缓存失序分组
+ 可以使用累计确认（计算机网络），也可以不使用（自顶向下）
+ 重传对应分组
+ **窗口大小不能超过缓冲区的一半**